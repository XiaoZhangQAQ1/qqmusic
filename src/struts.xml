<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">


<struts>
	<!-- 这里默认就是utf-8 -->
	<constant name="struts.i18n.encoding" value="UTF-8"></constant>
	<!-- 动态方法 -->
	<constant name="struts.enable.DynamicMethodInvocation" value="true"></constant>
	<!-- 配置文件自动更新 -->
	<constant name="struts.configuration.xml.reload" value="true"></constant>
	<!-- ********************************华丽的分割线************************************ -->
	
	<!-- ********************************华丽的分割线************************************ -->		
	<package name="default" namespace="/" extends="struts-default">
	    <!-- userAction -->
	   <action name="userAction" class="com.bdqn.qqmusic.action.UserAction" >
	   		
			<result name="success" type="chain" >profile</result>
			<result name="error" type="redirect" >loginForm.jsp</result>
		</action>
		<!-- "音乐库"album页action ps:没细改,只是直接连到原来的servlet-->
		<action name="album" class="com.bdqn.qqmusic.action.AlbumAction" >
			<result name="success" type="redirect" >album.jsp</result>
		</action>
		<!-- "音乐库"singerlist页action -->
		<action name="singerlist" class="com.bdqn.qqmusic.action.SingerListAction" >
			<result name="singerlist"  >testA.jsp</result>
		</action>		
	</package>
	
	<!-- json -->
	<package name="json" namespace="/" extends="json-default">
		<interceptors>
			<!-- 验证登录有效性 -->
			<interceptor name="auth" class="com.bdqn.qqmusic.action.interceptor.AuthInerceptor"></interceptor>
		</interceptors>
		<!-- 默认的拦截器栈 -->
	
		<action name="testJson" class="com.bdqn.qqmusic.action.SingerListAction">			
			<result name="singerlist" type="json" >
				<param name="includeProperties">
					list.*
				</param>
			</result>
		</action>
		
 		
		 <!-- "我的音乐"profile页action -->
		<action name="profile"  class="com.bdqn.qqmusic.action.ProfileAction" >
			<interceptor-ref name="auth"></interceptor-ref>
			<result name="success" type="dispatcher" >profile.jsp</result>
			<result name="error">loginForm.jsp</result>	
		</action>
		<action name="pager"  class="com.bdqn.qqmusic.action.ProfileAction">
		<interceptor-ref name="auth"></interceptor-ref>
			<result name="success" type="json" >
				<param name="includeProperties">
					maxPage,currentPage,songlist__list.*
				</param>
			</result>		
		</action> 	
	</package>
	
</struts>    
